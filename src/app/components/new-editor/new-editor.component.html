<app-navbar></app-navbar>

<div class="canvas-wrapper w-100">

  <div class="canvas-drawer">
      
    <div class="row row-height">

      <!-- 1st Column -->
      <div class="col-sm-12 col-md-3 col-lg-3 col-xl-3 text-center">
        <div class="row" *ngFor="let image of images;let i=index;" (click)="onAttributeChange(image , 'imageChange')">
          <div class="col left">
            <img class="img-fluid" [src]="image"/>
            <img #img [src]="selectedImage" style="display: none;"/>
          </div>
        </div>
      </div>
      <!-- /. 1st Column -->
  
      <!-- 2nd Column -->
      <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6 border mid">
          
        <div class="row mb-2">
          <div class="col">
            <button class="btn btn-block btn-action" (click)="onResizeBtnClick({ action: 'rotate' })">Rotate</button>
          </div>
          <div class="col">
            <button class="btn btn-block btn-action" (click)="onResizeBtnClick({ action : showCanvas ? 'reposition' : 'done' })">{{ showCanvas ? 'Reposition' : 'Done' }}</button>
          </div>
        </div>

        <div #canvasArea class="row">
          <div class="col" [hidden]="!showCanvas">
            <canvas #canvas id="canvas"></canvas>   
          </div>

          <div #croppieContainer class="col" [hidden]="showCanvas"></div>

        </div>
          
      </div>
      <!-- /. 2nd Column -->

      <!-- 3rd Column -->
      <div class="col-sm-12 col-md-3 col-lg-3 col-xl-3 text-center" [ngClass]="{'overlay': !showCanvas  }">
        <div class="canvas-controls">      
          <!-- Button Area -->
          <app-buttons-area [canvas]="canvas$"></app-buttons-area>          
          <div class="canvas-shapes">
            <div class="accordion" id="accordionExample">          
              <!-- Canvas Size -->
              <app-canvas-size [selectedOptions]="selectedOptions" (onSizeChange)="onAttributeChange( $event , 'canvasSize')"></app-canvas-size>
              
              <!-- FILTERS -->
              <app-filters [canvas]="canvas$" [selectedImage]="selectedImage" [selectedOptions]="selectedOptions" [data]="data"></app-filters>
    
              <!-- TEXT -->
              <app-text-modifiers [canvas]="canvas$" [data]="data" [options]="selectedOptions" (onTextVisibilityChange)="onTextVisibilityChange($event)"></app-text-modifiers>
            </div>
          </div>
        </div>
      </div>
      <!-- /. 3rd Column -->
    </div>      
  </div>
</div>



